---
layout: post
title: "为LLVM添加简易RISCV后端(五)：指令选择"
toc: true
date: 2020-12-08 19:30:38 +0800
categories: LLVM
keywords: LLVM
description: 无
---

为一个新的指令集编写编译器是一件复杂的事情，尽管LLVM的出现使这个过程比之前简单多了！
一个匪夷所思的困难是缺乏一个简单的、循序渐进的教程[^1][^2]。
因此，本系列博客试图提供一个从头开始编写LLVM后端的简易教程来解决（部分）问题。


## 指令选择

我们先前简要介绍了LLVM后端的工作过程。
在这篇文章中，我们将更深入地了解这个过程的第一个阶段：指令选择。
我们的目的是在了解RISCW后端的具体实现之前，了解它的工作原理以及如何配置它。

**注意：**[LLVM文档](https://llvm.org/docs/CodeGenerator.html#instruction-selection-section)对指令选择的工作原理给出了简短而清晰的描述，这篇文章通过示例来重新说明这一点。

**注意：**本文中显示的示例是使用我们的RISCW后端框架构建的。可以在这里找到它的来源。


## 注释
[^1]:公平地说，有不少关于LLVM的书籍和网站，但大多数都是对这个工具的一般性描述，还有是关于如何编写新前端的实践教程，但后端的教程非常少。
[^2]:[这个教程](https://jonathan2251.github.io/lbd/)描述了如何开发LLVM后端，但我发现很难理解。
